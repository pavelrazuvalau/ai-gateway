# Концепция системы артефактов

## Суть

Система управления артефактами для контроля работы AI-агентов в серьезных проектах. Разработчик контролирует каждый шаг, видит, куда смотрит агент, и может направлять процесс на промежуточных этапах.

## Архитектура (MVC)

- **Controller (Системные промпты)**: Логика, процедуры, workflow
  - `impl-planner.agent.md` — планирование и создание артефактов
  - `vibe-coder.agent.md` — выполнение и обновление артефактов

- **View (Шаблоны)**: Форматирование, структура, инструкции
  - `IMPLEMENTATION_PLAN.md`
  - `IMPLEMENTATION_CHANGELOG.md`
  - `IMPLEMENTATION_QUESTIONS.md`
  - `IMPLEMENTATION_SESSION_CONTEXT.md`

- **Model (Артефакты)**: Данные и контекст
  - PLAN, CHANGELOG, QUESTIONS, SESSION_CONTEXT

## Типы артефактов

1. **PLAN** (критический) — постоянная память: фазы, шаги, структура работы
2. **SESSION_CONTEXT** (обязательный после планирования) — оперативная память: текущее состояние, анализ, контекст
3. **CHANGELOG** (условный) — история: завершенные шаги, решения
4. **QUESTIONS** (условный) — блокеры: активные и решенные вопросы

## Принципы

- **Контроль разработчика**: частые остановки для проверки и направления
- **Видимость**: видно, какие файлы анализируются, какие запросы используются
- **Последовательность**: файлы создаются/изменяются по одному, сбор контекста может быть параллельным
- **Самостоятельность**: артефакты содержат данные + скопированные инструкции из шаблонов

## Workflow

**Планирование** (`impl-planner`):
1. Анализ кодовой базы → STOP
2. Понимание требований → STOP
3. Разбивка на фазы → STOP
4. Разбивка на шаги → STOP
5. Выявление вопросов → STOP
6. Создание PLAN → STOP
7. Создание дополнительных артефактов (если нужно) → STOP
8. Заполнение SESSION_CONTEXT → STOP

**Выполнение** (`vibe-coder`):
- Читает существующие артефакты
- Следует PLAN шаг за шагом
- Реализует изменения кода
- Обновляет артефакты
- STOP после каждого шага/фазы

## Ключевые правила

- Создание файлов: последовательно (по одному)
- Сбор контекста: может быть параллельным
- Инструкции: копируются из шаблонов в артефакты
- Остановки: после каждого значимого этапа с ожиданием подтверждения


